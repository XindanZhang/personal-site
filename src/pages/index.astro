---
import BaseLayout from "../layouts/BaseLayout.astro";
import { site } from "../data/site";

const year = new Date().getFullYear();
---

<BaseLayout title={`${site.name} · ${site.brand}`} description={`${site.name} — ${site.tagline}.`}>
  <div class="stars"></div>
  <div class="nebula"></div>

  <main class="container">
    <nav class="nav" aria-label="Primary">
      <div class="nav-links">
        <a href="#about">About</a>
        <a href="#projects">Projects</a>
        <a href="#contact">Contact</a>
      </div>
    </nav>

    <header class="hero">
      <div class="bot-icon" aria-hidden="true">
        <svg viewBox="0 0 600 120" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="pixel-top" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="var(--coral-bright)"/>
              <stop offset="100%" stop-color="var(--coral-mid)"/>
            </linearGradient>
            <linearGradient id="pixel-side" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="var(--coral-mid)"/>
              <stop offset="100%" stop-color="var(--coral-dark)"/>
            </linearGradient>
            <linearGradient id="pixel-front" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="var(--cyan-bright)"/>
              <stop offset="100%" stop-color="var(--cyan-mid)"/>
            </linearGradient>
          </defs>

          <g id="cluster-shape">
            <circle cx="60" cy="60" r="46" stroke="var(--cyan-bright)" stroke-opacity="0.35" stroke-width="2" class="ring"/>

            <!-- Connectors (distributed topology) -->
            <path d="M34 44 L60 28 L86 44" stroke="var(--cyan-bright)" stroke-opacity="0.6" stroke-width="2" />
            <path d="M34 76 L60 92 L86 76" stroke="var(--cyan-bright)" stroke-opacity="0.45" stroke-width="2" />
            <path d="M34 44 L34 76" stroke="var(--cyan-bright)" stroke-opacity="0.45" stroke-width="2" />
            <path d="M86 44 L86 76" stroke="var(--cyan-bright)" stroke-opacity="0.45" stroke-width="2" />
            <path d="M60 28 L60 44" stroke="var(--cyan-bright)" stroke-opacity="0.35" stroke-width="2" />

            <!-- Pixel cubes (isometric-ish) -->
            <!-- Top node -->
            <polygon points="60 20 71 26 60 32 49 26" fill="url(#pixel-top)" />
            <polygon points="49 26 60 32 60 44 49 38" fill="url(#pixel-side)" />
            <polygon points="60 32 71 26 71 38 60 44" fill="url(#pixel-front)" />

            <!-- Left node -->
            <polygon points="26 46 37 52 26 58 15 52" fill="url(#pixel-top)" />
            <polygon points="15 52 26 58 26 70 15 64" fill="url(#pixel-side)" />
            <polygon points="26 58 37 52 37 64 26 70" fill="url(#pixel-front)" />

            <!-- Right node -->
            <polygon points="94 46 105 52 94 58 83 52" fill="url(#pixel-top)" />
            <polygon points="83 52 94 58 94 70 83 64" fill="url(#pixel-side)" />
            <polygon points="94 58 105 52 105 64 94 70" fill="url(#pixel-front)" />

            <!-- Bottom node -->
            <polygon points="60 88 71 94 60 100 49 94" fill="url(#pixel-top)" />
            <polygon points="49 94 60 100 60 112 49 106" fill="url(#pixel-side)" />
            <polygon points="60 100 71 94 71 106 60 112" fill="url(#pixel-front)" />

          </g>

          <g>
            <use href="#cluster-shape" />
            <animateTransform
              attributeName="transform"
              attributeType="XML"
              type="rotate"
              from="0 60 60"
              to="360 60 60"
              dur="18s"
              repeatCount="indefinite"
            />
          </g>
          <g>
            <use href="#cluster-shape" transform="translate(120 0)" />
            <animateTransform
              attributeName="transform"
              attributeType="XML"
              type="rotate"
              from="0 180 60"
              to="360 180 60"
              dur="18s"
              repeatCount="indefinite"
            />
          </g>
          <g>
            <use href="#cluster-shape" transform="translate(240 0)" />
            <animateTransform
              attributeName="transform"
              attributeType="XML"
              type="rotate"
              from="0 300 60"
              to="360 300 60"
              dur="18s"
              repeatCount="indefinite"
            />
          </g>
          <g>
            <use href="#cluster-shape" transform="translate(360 0)" />
            <animateTransform
              attributeName="transform"
              attributeType="XML"
              type="rotate"
              from="0 420 60"
              to="360 420 60"
              dur="18s"
              repeatCount="indefinite"
            />
          </g>
          <g>
            <use href="#cluster-shape" transform="translate(480 0)" />
            <animateTransform
              attributeName="transform"
              attributeType="XML"
              type="rotate"
              from="0 540 60"
              to="360 540 60"
              dur="18s"
              repeatCount="indefinite"
            />
          </g>
        </svg>
      </div>

      <h1 class="title">
        <span class="title-main">{site.name}</span>
      </h1>

      <p class="tagline">{site.tagline}</p>

      {site.intro ? (
        <p class="description">
          {site.intro}
        </p>
      ) : null}

    </header>

    <section id="about" class="section">
      <div class="section-header">
        <h2 class="section-title"><span class="claw-accent">⟩</span> About</h2>
      </div>
      <div class="about-grid">
        <div class="panel">
          <h3>Bio</h3>
          <p>
            Placeholder bio. Swap this with your story: what you research, what you build,
            and what problems you want to solve next.
          </p>
          <div class="panel terminal-panel">
            <div class="terminal-header">
              <span class="terminal-dot"></span>
              <span class="terminal-dot"></span>
              <span class="terminal-dot"></span>
              <span class="terminal-title">xindan://status</span>
            </div>
            <div class="terminal-body">
              <div class="terminal-line">$ boot --role "{site.tagline}"</div>
              <div class="terminal-line"><strong>ok</strong> · research mode active</div>
              <div class="terminal-line">$ focus --topic "{site.focus}"</div>
            </div>
          </div>
        </div>
        <div class="panel status-panel">
          <div class="status-row"><span>status</span><span class="value">{site.status}</span></div>
          <div class="status-row"><span>location</span><span class="value">{site.location}</span></div>
          <div class="status-row"><span>focus</span><span class="value">{site.focus}</span></div>
          <div class="status-row"><span>availability</span><span class="value">Open to collab</span></div>
        </div>
      </div>
    </section>

    <section id="projects" class="section">
      <div class="section-header">
        <h2 class="section-title"><span class="claw-accent">⟩</span> Projects</h2>
      </div>
      <div class="projects-grid">
        {site.projects.map((project) => (
          <a
            class={`project-card ${project.tag === "Featured" ? "featured" : ""}`}
            href={project.url}
            target={project.url === "#" ? "_self" : "_blank"}
            rel={project.url === "#" ? undefined : "noopener"}
          >
            <div class="project-tag">{project.tag}</div>
            <h3>{project.name}</h3>
            <p>{project.description}</p>
            <span class="project-link">View →</span>
          </a>
        ))}
      </div>
    </section>

    <section id="contact" class="section">
      <div class="panel contact-panel">
        <h2 class="section-title" style="justify-content: center;">Contact</h2>
        <p>Want to collaborate, swap ideas, or build something weird? Send a ping.</p>
        <div class="cta-row" style="margin-top: 18px;">
          <a class="cta primary" href={site.links.email}>Email</a>
          <a class="cta ghost" href={site.links.github} target="_blank" rel="noopener">GitHub</a>
          <a class="cta ghost" href={site.links.linkedin} target="_blank" rel="noopener">LinkedIn</a>
        </div>
      </div>
    </section>

    <footer class="footer">
      © {year} {site.name}. Built with love.
    </footer>
  </main>
</BaseLayout>
